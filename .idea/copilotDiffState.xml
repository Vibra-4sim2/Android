<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/dam/models/SavedSortie.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/dam/models/SavedSortie.kt" />
              <option name="originalContent" value="&#10;" />
              <option name="updatedContent" value="package com.example.dam.models&#10;&#10;import com.google.gson.annotations.SerializedName&#10;&#10;/**&#10; * Modèle pour les sorties sauvegardées&#10; */&#10;data class SavedSortieResponse(&#10;    @SerializedName(&quot;_id&quot;) val id: String,&#10;    @SerializedName(&quot;sortie&quot;) val sortie: SortieInfo,&#10;    @SerializedName(&quot;savedAt&quot;) val savedAt: String&#10;)&#10;&#10;data class SaveSortieRequest(&#10;    @SerializedName(&quot;sortieId&quot;) val sortieId: String&#10;)&#10;&#10;data class SaveSortieResponse(&#10;    @SerializedName(&quot;success&quot;) val success: Boolean,&#10;    @SerializedName(&quot;message&quot;) val message: String&#10;)&#10;&#10;data class RemoveSavedSortieResponse(&#10;    @SerializedName(&quot;success&quot;) val success: Boolean,&#10;    @SerializedName(&quot;message&quot;) val message: String&#10;)" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/app/src/main/java/com/example/dam/repository/SavedSortiesRepository.kt">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/app/src/main/java/com/example/dam/repository/SavedSortiesRepository.kt" />
              <option name="updatedContent" value="package com.example.dam.repository&#10;&#10;import android.util.Log&#10;import com.example.dam.models.SaveSortieRequest&#10;import com.example.dam.models.SavedSortieResponse&#10;import com.example.dam.remote.RetrofitInstance&#10;import com.example.dam.utils.Result&#10;&#10;/**&#10; * Repository pour gérer les sorties sauvegardées&#10; */&#10;class SavedSortiesRepository {&#10;    private val api = RetrofitInstance.adventureApi&#10;    private val TAG = &quot;SavedSortiesRepository&quot;&#10;&#10;    /**&#10;     * Récupère toutes les sorties sauvegardées&#10;     */&#10;    suspend fun getSavedSorties(token: String): Result&lt;List&lt;SavedSortieResponse&gt;&gt; {&#10;        return try {&#10;            val response = api.getSavedSorties(&quot;Bearer $token&quot;)&#10;            if (response.isSuccessful &amp;&amp; response.body() != null) {&#10;                Log.d(TAG, &quot;✅ Successfully fetched ${response.body()!!.size} saved sorties&quot;)&#10;                Result.Success(response.body()!!)&#10;            } else {&#10;                val errorMsg = &quot;Error ${response.code()}: ${response.message()}&quot;&#10;                Log.e(TAG, &quot;❌ $errorMsg&quot;)&#10;                Result.Error(errorMsg)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;❌ Exception: ${e.message}&quot;, e)&#10;            Result.Failure(e)&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Sauvegarde une sortie&#10;     */&#10;    suspend fun saveSortie(token: String, sortieId: String): Result&lt;String&gt; {&#10;        return try {&#10;            val request = SaveSortieRequest(sortieId)&#10;            val response = api.saveSortie(&quot;Bearer $token&quot;, request)&#10;            if (response.isSuccessful &amp;&amp; response.body() != null) {&#10;                val message = response.body()!!.message&#10;                Log.d(TAG, &quot;✅ $message&quot;)&#10;                Result.Success(message)&#10;            } else {&#10;                val errorMsg = &quot;Error ${response.code()}: ${response.message()}&quot;&#10;                Log.e(TAG, &quot;❌ $errorMsg&quot;)&#10;                Result.Error(errorMsg)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;❌ Exception: ${e.message}&quot;, e)&#10;            Result.Failure(e)&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Supprime une sortie sauvegardée&#10;     */&#10;    suspend fun removeSavedSortie(token: String, sortieId: String): Result&lt;String&gt; {&#10;        return try {&#10;            val response = api.removeSavedSortie(&quot;Bearer $token&quot;, sortieId)&#10;            if (response.isSuccessful &amp;&amp; response.body() != null) {&#10;                val message = response.body()!!.message&#10;                Log.d(TAG, &quot;✅ $message&quot;)&#10;                Result.Success(message)&#10;            } else {&#10;                val errorMsg = &quot;Error ${response.code()}: ${response.message()}&quot;&#10;                Log.e(TAG, &quot;❌ $errorMsg&quot;)&#10;                Result.Error(errorMsg)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;❌ Exception: ${e.message}&quot;, e)&#10;            Result.Failure(e)&#10;        }&#10;    }&#10;&#10;    /**&#10;     * Vérifie si une sortie est sauvegardée&#10;     */&#10;    suspend fun checkIfSortieSaved(token: String, sortieId: String): Result&lt;Boolean&gt; {&#10;        return try {&#10;            val response = api.checkIfSortieSaved(&quot;Bearer $token&quot;, sortieId)&#10;            if (response.isSuccessful &amp;&amp; response.body() != null) {&#10;                val isSaved = response.body()!![&quot;saved&quot;] ?: false&#10;                Log.d(TAG, &quot;✅ Sortie $sortieId is saved: $isSaved&quot;)&#10;                Result.Success(isSaved)&#10;            } else {&#10;                val errorMsg = &quot;Error ${response.code()}: ${response.message()}&quot;&#10;                Log.e(TAG, &quot;❌ $errorMsg&quot;)&#10;                Result.Error(errorMsg)&#10;            }&#10;        } catch (e: Exception) {&#10;            Log.e(TAG, &quot;❌ Exception: ${e.message}&quot;, e)&#10;            Result.Failure(e)&#10;        }&#10;    }&#10;}&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>